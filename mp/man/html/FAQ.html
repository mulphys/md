<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ReMoDy: Frequently Asked Questions</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="FAQ">Frequently Asked Questions </a></h1><h2><a class="anchor" name="SecFAQ">
FAQs</a></h2>
<ul>
<li><b>Q:</b><em>"When I run remody with a larger domain the program doesn't run and show me this message:"</em> <br>
<br>
<b>CAN'T INSERT ELEMENT: <a class="el" href="classCollection.html">Collection</a> OF 99999 IS FULL</b><br>
<br>
 <b>A:</b> Increase the number of molecules above 100000 in &lt;molecules&gt;....&lt;/molecules&gt; section of the config file (syngas.xml) You can estimate the number of molecules you should use from the ideal gas law, that is how many molecules you can have in the domain size you selected and increase that number by 10% to avoid that error condition above.</li></ul>
<p>
<ul>
<li><b>Q:</b> <em>"How to make the code run faster?"</em><br>
 <b>A:</b> When you run the code check how much memory the program is using. For example, you can do it running 'top' from a terminal. If it is using less than 80%, then decrease the parameter inside <b>&lt;grid&gt;&lt;cellsize&gt;...&lt;/cellsize&gt;&lt;/grid&gt;</b> tag. This will make code run a bit faster but it will also increase the memory utilization. It may not even start if you decrease it too much. If the memory utilization is still less than 80%, you can keep decreasing that parameter. Do not decrease it below twice the size of the biggetst molecule in your composition.</li></ul>
<p>
<ul>
<li><b>Q:</b> <em>"How do I restart the run?"</em><br>
 <b>A:</b> When the code is running it generates output files at regular time interval (physical time, that is) which is set inside <b>&lt;time&gt;&lt;output&gt;...&lt;/output&gt;&lt;/time&gt;</b> tag. The output is dumped to the gzipped-files named like remody-&lt;timestamp&gt;.dat.gz. To restart the run from the output file you should start the run as: <br>
<br>
<b>./remody -f configfile.xml remody-&lt;timestamp&gt;.dat.gz</b><br>
<br>
</li></ul>
<p>
<ul>
<li><b>Q:</b><a class="anchor" name="readlog"></a> <em>"How do I produce time-curves of various parameters?"</em><br>
 <b>A:</b> You can produce time curves for such parameters as temperature (T), number of molecules in the domain (N), average energy per molecule (E), and various specie concentrations. For T,N, and E follow the procedure as described below, using the syntax with an equal sign (=), for species do not use equal sign as described in the following two questions.</li></ul>
<p>
<ul>
<li><b>Q:</b> <em>"How do I construct the temperature curve?"</em><br>
 <b>A:</b> <a class="el" href="namespaceRun.html" title="Processing command-line and execution control parameters.">Run</a> the readlog.py utility with the remody terminal output log file as input. For example, when you start the batch job, use the command like this:<br>
<br>
<b> ./job -f config.xml &gt; job.log &amp; </b><br>
<br>
 This will dump temperature, concentrations, and other parameters into the job.log file every iteration. Then you can run the readlog.py utility to produce the temperature curve file from the log file, like: <br>
<br>
<b> python readlog.py T= &lt; job.log &gt; temp.dat </b><br>
<br>
 where the temp.dat file contains two columns of temperature versus time, which be displayed in gnuplot with a command like:<br>
<br>
<b>plot 'temp.dat' w l</b><br>
<br>
</li></ul>
<p>
<ul>
<li><b>Q:</b> <em>""</em> <b>A:</b></li></ul>
<p>
<ul>
<li><b>Q:</b> <em>"How do I construct specie concentration time curves?"</em><br>
 <b>A:</b> Do similarly as for the temperature curve above, except when running the readlog specify the specie chemical formula as provided in the input xml file, and do not use the equal sign (=) after the specie name as in the case above, like this:<br>
<br>
<b> python readlog.py CO2 &lt; job.log &gt; co2.dat </b><br>
<br>
</li></ul>
<p>
<ul>
<li><b>Q:</b> <em>"How can I retrieve the results of simulation?"</em> <br>
<b>A:</b> Here is how you can produce the results from the simulation run. First check if the run is going with top: <br>
<br>
<b> top </b><br>
<br>
 This will show the table like this: <br>
<br>
<code> top - 04:29:40 up 42 days, 3:41, 2 users, load average: 1.03, 1.10, 1.20<br>
 Tasks: 126 total, 3 running, 123 sleeping, 0 stopped, 0 zombie<br>
 Cpu(s): 25.2us, 0.1sy, 0.0ni, 74.7id, 0.0wa, 0.0hi, 0.0si, 0.0st<br>
 Mem: 4031520k total, 3878180k used, 153340k free, 336828k buffers<br>
 Swap: 10241428k total, 1454736k used, 8786692k free, 552436k cached<br>
 <br>
 PID USER PR NI VIRT RES SHR S CPU MEM TIME+ COMMAND<br>
 29283 rolando 25 0 3353m 2.0g 1336 R 100 52.8 9843:09 job<br>
 1 root 15 0 10308 596 544 S 0 0.0 0:04.77 init<br>
 ...<br>
 </code> There you can see that job is running. Quit it by pressing 'q'-key. Then check how far the run has gone: <br>
<br>
<b> tail -f syngas2.log </b><br>
<br>
 This will show the something like:<br>
<br>
<code> Time=6.103e-01 Step=2.439e-06 Memory=41% N=8279309 T=1039.63K E=1.188e-13J<br>
 H H2 OH H2O CH3 CH4<br>
 5.45126 31.48455 0.00104 18.91287 0.00041 13.87211<br>
 CO2 CO N2<br>
 8.70242 10.84918 10.72622<br>
 <br>
<br>
 Note that syngas2.log file above was used because the job started with the command: <br>
<br>
<b> ./job -f syngas2.xml job-4.dat.gz 1&gt; syngas2.log 2&gt; syngas2.err &amp; </b><br>
<br>
 If you used a different log file you should use that one above. From the table you can see all the species currently in the simulation. Now you can quit tail -f with pressing ^C (Cntrl.C). <br>
<br>
 To produce the time sequence do this: <br>
<br>
<ol type=a>
<li><a class="el" href="namespaceRun.html" title="Processing command-line and execution control parameters.">Run</a> this command: <br>
<br>
<b> python readlog.py H2 &lt; syngas2.log &gt; H2-time.dat </b><br>
<br>
 Note that readlog.py program is in your remody/util directory. This should create the H2-time.dat file.<br>
 <br>
</li><li>Check the file with gnuplot: <br>
<br>
<b> gnuplot&gt; plot 'H2-time.dat' w l </b><br>
<br>
 And then you do the same for H2O, CO2, etc.</li></ol>
</code></li></ul>
<p>
<code><ul>
<li><b>Q:</b> <em>"How to produce a spatial distribution along one axis?"</em> <br>
<b>A:</b><ol type=a>
<li>Check that you have the hist program in run directory: ls hist if you dont, compile it if necessary in your remody/util directory by running make and link it or copy into your run directory, like ln -s ../util/hist .<br>
</li><li>Select the time step for which you want the distribution. For example, for 5 nanoseconds, you should use job-5.dat.gz file.</li><li><a class="el" href="namespaceRun.html" title="Processing command-line and execution control parameters.">Run</a> the command: <br>
<br>
<b> gunzip job-5.dat.gz -c | grep H2 | grep -v H2O | cut -f 3 | ./hist &gt; H2-5.dat </b><br>
<br>
 This will create the H2-5.dat file, which you can see with gnuplot as: <br>
<br>
<b> plot 'H2-5.dat' w l </b><br>
<br>
 Note, that the line above has 'grep -v H2O' part. This is needed to preclude all H2O molecules from the H2 list. Similarily, when you produce CO distribution, you should use: <br>
<br>
<b> gunzip job-5.dat.gz -c | grep CO | grep -v CO2 | cut -f 3 | ./hist &gt; CO-5.dat </b><br>
<br>
 But to produce H2O or CO2 distributions, you should use: <br>
<br>
<b> gunzip job-5.dat.gz -c | grep H2O | cut -f 3 | ./hist &gt; H2O-5.dat gunzip job-5.dat.gz -c | grep CO2 | cut -f 3 | ./hist &gt; CO2-5.dat </b><br>
<br>
 Then you can produce plot of all of them like: <br>
<br>
<b> plot 'H2-5.dat' w l, 'H2O-5.dat w l, 'CO-5.dat' w l, 'CO2-5.dat' w l </b><br>
<br>
 etc. The same for other nanoseconds. You may need to set the axes labels, like <br>
<br>
<b> set xlabel 'TIME [ns]' set ylabel 'NUMBER OF MOLECULES' </b><br>
<br>
 To save the plot into a png-file, use: <br>
<br>
<b> set term png set output 'concentrations-5ns.png' </b><br>
<br>
 and then run the above plot command again. This will create the concentrations-5ns.png file, which you can include into a presentation or a paper. But don't forget to get the output back to the screen with: <br>
<br>
<b> set output set term x11 </b><br>
<br>
 before you try other plot commands, or everything will be written to that png file. <br>
<br>
 Of course if you are proficient with Python, you can use the <a href="http://matplotlib.sourceforge.net">matplotlib</a> module to plot and alalyze the results. </li></ol>
</li></ul>
</code></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun Nov 15 15:26:36 2009 for ReMoDy by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
